---
permalink: /exploits.html
title: Существующие методы взлома
author_profile: true
---
{% include toc title="Разделы" %}

В данный момент прошиваются не все приставки семейства Nintendo Switch. Поэтому первоочередной задачей станет определение того прошивается ли конкретно ваша консоль. 

Существует два типа уязвимости. Первым, аппаратным, обладают только приставки, изготовленные до лета 2018-го года, впрочем их до сих пор можно найти в продаже. Приставки в которых уязвимость уже закрыта прошиваются только в том случае, если версия их официальной прошивки 4.1.0 или ниже. 

## Fusée Gelée - аппаратная уязвимость

Этот не привязной эксплойт использует уязвимость в штатном режиме восстановления Nintendo Switch. Для его работы требуется внешнее устройство, {% include abbr/host.txt abbr="хост" %}, с помощью которого на приставке и будет запускаться кастомная прошивка. Делать это будет необходимо при каждой перезагрузке консоли. В качестве {% include abbr/host.txt abbr="хоста" %} может использоваться ПК, мобильный телефон на Android или iOS или специальное устройство, {% include abbr/dongle.txt abbr="донгл" %}

Fusée Gelée позволяет получить полный доступ к системе, поскольку он срабатывает на раннем этапе загрузки приставки, ещё до того, как активируются её защитные механизмы и и сам загрузчик консоли, что позволяет подменить последний кастомным. 

К сожалению, на приставках, произведённых после лета 2018-го года, уязвимость была закрыта. 

[Подробнее > > >](fusee-gelee){:target="_blank"}

{% spoiler Проверка консоли на наличие уязвимости Fusée Gelée %}
{% include /inc/checker.txt %}
{% endspoiler %}

## Deja-vu - программная уязвимость

Вторая группа эксплойтов так же является не привязной и использует уязвимость в механизме сна приставки, в так называемом warmboot. Этот эксплойт так же даёт полный доступ к системе, поскольку перезагружает консоль таким образом, что у нас появляются те же полномочия, что и в случае использования Fusée Gelée. Deja-vu выполняется с помощью браузера, следовательно после каждого выключения или загрузки приставки в стоковую прошивку вам потребуется выполнять всю цепочку активации эксплойта заново. 

В данный момент Deja-vu реализован только для прошивок версии 1.0.0-3.0.0 и 4.0.1-4.1.0, однако, в теории, уязвимость, которую он эксплуатирует, не закрыта вплоть до прошивки 7.0.1 включительно (на прошивке 8.0.0 уязвимость была полностью устранена), поэтому в будущем есть надежда, что эксплойт заработает и на более высоких версиях системного ПО. Существует две релализации этого эксплойта - **Nereba** для прошивки 1.0.0 и **Caffeine** для прошивок 2.0.0-3.0.0 и 4.0.1-4.1.0.

{% spoiler Проверка консоли на наличие возможности использовать Deja-vu %}
Возможность взлома зависит от версии системного ПО, установленной на приставке. Если приставка настроена и использовалась, версию системного ПО можно посмотреть в меню "**Системные настройки**" -> "**Система**"

![]({{ base_path }}/images/screenshots/system-version.jpg) 
{: .text-center}

Если приставка новая и ещё не настроена, отключите её, удерживая кнопку (POWER) 30 секунд, затем **зажмите и удерживайте** *обе* кнопки громкости и, не отпуская их, включите приставку. Держите кнопки громкости до тех пор, пока не появится меню, в первой строке которого будет указана текущая версия системного ПО. 

Если версия системного ПО на приставке равна **{% include vars/caffeine_fw.txt %}**, то такую приставку точно можно прошить с помощью Deja-vu
Если версия прошивки 4.0.1 или ниже, то такая приставка точно прошивается с помощью Fusée Gelée, что и рекомендуется делать
{: .notice--info}

{% endspoiler %}


<!-- ### Запуск прошивки

Ниже описаны шаги, которые нужно выполнять каждый раз для запуска прошивки. Первый запуск прошивки сильно отличается от регулярного. О нём отдельно ниже 

1. Вводим приставку в [режим RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}. Для этого выключаем её, снимаем с зарядки, вынимаем правый джойкон и вставляем [замыкатель](fusee-gelee#замыкатель){:target="_blank"}. Теперь зажимаем (и держим) кнопку увеличения громкости и включаем консоль. Если экран после включения остаётся чёрным, вы всё сделали верно. Если приставка включилась как обычно — переделывайте.
1. Подключаем к [{% include abbr/host.txt abbr="хосту" %}](fusee-gelee#часть-ii---использование-fusée-gelée){:target="_blank"} и закидываем в консоль пейлоад (`payload.bin` в паке). Если [ПК на Windows](fusee-gelee#запуск-на-windows){:target="_blank"}, то предварительно нужно [установить драйвера](fusee-gelee#установка-драйверов){:target="_blank"}. Если телефон на андроиде, то используем [Rekado](https://github.com/MenosGrante/Rekado/releases/latest){:target="_blank"}, если что-то иное, то можно через [браузер вашего устройства](fusee-gelee#запуск-на-linux--chromeos--android--macos-через-браузер){:target="_blank"}. Если [донгл](fusee-gelee#запуск-через-донгл){:target="_blank"} — просто вставляем его в консоль. Перед этим просмотрите инструкцию к донглу, может приехать не прошитым. Инструкция для [r4s](r4){:target="_blank"} и [rcmloader](rcmloader){:target="_blank"}. В общем, всё это достаточно подробно описано в инструкции по [Fusée Gelée](fusee-gelee){:target="_blank"}. Просто выберите то, что подходит вам и следуйте инструкции. 
1. В этот момент запустится прошивка и если ничего не нажимать, вы попадёте в установленный вами {% include abbr/cfw.txt abbr="кастом" %}. Если ваша прошивка {% include /vars/sys_version.txt %} или выше, у вас нет проблем с картами памяти в exFAT и у вас есть резервные копии NAND, BOOT0/1 и ключей, то можете [начинать играть](games)! Для остальных же инструкция не заканчивается

### Для тех, кто прошивается впервые 

1. Запустите payload без карты памяти в приставке, чтобы попасть в загрузчик, затем вставьте карту памяти в консоль
1. [Делаем резервную копию](backup-nand){:target="_blank"} через hekate 
	* [NAND](backup-nand#часть-i---дампим-nand){:target="_blank"}
	* [BOOT0/1](backup-nand#часть-ii---дампим-boot01	){:target="_blank"}
	* [Ключи](backup-nand#часть-iii---дампим-ключи){:target="_blank"}
1. [Копируем бекап на ПК](backup-nand#часть-iv---копирование-резервной-копии-на-пк){:target="_blank"}, возвращаем карту в приставку
1. Выключаем приставку и запускаем прошивку по новой (RCM -> подключение к {% include abbr/host.txt abbr="хосту" %} -> проброс пейлоада)
1. Если во время заставки не нажимать (VOL-), сразу запустится {% include abbr/cfw.txt abbr="кастомная прошивка" %}, если нажать - попадёте в hekate 
1. Запускаем [HBL](hbl){:target="_blank"} и делаем [безопасное обновление прошивки](update-to-latest){:target="_blank"}
	* Можно пропустить ТОЛЬКО в том случае, если у вас и так прошивка {% include /vars/sys_version.txt %} или выше и вы точно знаете, что на приставке работают карты памяти в exFAT. Если прошивка ниже, или вы не уверены на счёт карты - обновитесь по руководству
1. После безопасного обновления вам больше не нужно будет вставлять замыкатель в приставку для запуска прошивки. При включении приставка сразу перейдет в режим RCM и нужно будет просто пробросить пейлоад. Если вы пропустили часть с безопасным обновлением, активируйте [AutoRCM вручную](autorcm){:target="_blank"}.

Теперь вы знаете как всё работает и можете переходить к выполнению руководства, после прочтения [FAQ](faq){:target="_blank"}. Удачи!
 -->


## Выбор эксплойта
Для установки выберите в таблице версию прошивки, соответствующую вашей. 

<table>
  <colgroup>
    <col span="1" style="width: 10%;">
    <col span="1" style="width: 10%;">
    <col span="1" style="width: 40%;">
    <col span="1" style="width: 40%;">
  </colgroup>
  <thead>
    <tr>
      <th style="text-align: center">От</th>
      <th style="text-align: center">До</th>
      <th style="text-align: center">Пропатченный</th>
      <th style="text-align: center">Не пропатченный</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center; font-weight: bold;">1.0.0</td>
      <td style="text-align: center; font-weight: bold;">2.3.0</td>
      <td style="text-align: center; font-weight: bold;" colspan="2"><a href="fusee-gelee">Fusée Gelée</a></td>
    </tr>
    <tr>
      <td style="text-align: center; font-weight: bold;">3.0.0</td>
      <td style="text-align: center; font-weight: bold;">{% include vars/caffeine_fw.txt %}</td>
      <td style="text-align: center; font-weight: bold;"><a href="fusee-gelee">Fusée Gelée</a> или <a href="preparation-caffeine">Caffeine</a></td>
      <td style="text-align: center; font-weight: bold;"><a href="fusee-gelee">Fusée Gelée</a></td>
    </tr>
    <tr>
      <td style="text-align: center; font-weight: bold;">5.0.0</td>
      <td style="text-align: center; font-weight: bold;">{% include vars/sys_version.txt %}</td>
      <td style="text-align: center; font-weight: bold;"><strong>Невозможно прошить</strong></td>
      <td style="text-align: center; font-weight: bold;"><a href="fusee-gelee">Fusée Gelée</a></td>
    </tr>
    <!--<tr>
      <td style="text-align: center; font-weight: bold;" colspan="2">8.1.0</td>
      <td style="text-align: center; font-weight: bold;"><strong>Запуск Atmosphere невозможен</strong></td>
    </tr>-->
  </tbody>
</table>