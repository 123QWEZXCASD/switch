---
permalink: /preparation-caffeine.html
title: Подготовка к запуску кастомной прошивки через Caffeine 
author_profile: true
---
В этом разделе нас ждёт практическое применение теоретических знаний, полученных в прошлый раз. Каждый из пунктов **обязателен** к выполнению, если вы хотите получить максимум от прошивки своей консоли. Каждый из этих пунктов самодостаточен. Если вы по какой-то причине ранее не выполнили любой из них, вы можете вернуться к этому позже.

Вот краткий план того, чем мы займёмся: 

После выполнения каждой инструкции из нижеследующего списка, возвращайтесь на эту страницу и переходите к следующему пункту. Если какие-то из действий вы уже выполняли, повторно их делать не нужно. 
{: .notice--warning}


1. [Выбор кастомной прошивки](cfw){:target="blank_"} - на данном этапе вам необходимо определиться какой {% include abbr/cfw.txt abbr="кастом" %} вы будете использовать в дальнейшем, поскольку методы запуска и методы создания {% include abbr/emunand.txt abbr="EmuNAND" %} у них сильно разные. Просто прочитайте эту страницу и остановитесь на одной из двух прошивок. Делать пока ничего не надо. 
1. [Установка и настройка Caffeine и запуск hekate с его помощью](caffeine){:target="blank_"} - настраиваем точку входа и делаем первый запуск, чтобы попасть в {% include abbr/hekate.txt abbr="кастомный загрузчик" %}. Всегда помните, что вы спокойно можете извлекать и вставлять обратно карту памяти находясь в hekate! 
1. [Создание резервной копии прошивки](backup-nand){:target="blank_"}
1. Установка драйвера exFAT на официальную прошивку
{% spoiler Инструкция %}
Помните, что вы можете свободно вынимать и вставлять карту памяти в приставку, находясь в hekate!
{: .notice--info}

1. Карта памяти должна быть в формате [FAT32](http://customfw.xyz/format_sd){:target="_blank"}
1. Скачайте [версию 4.1.0 системного ПО приставки](https://mega.nz/#!wQ4HGLgI!ru3dBiMh9FdPJJvVTLJ6ex7EX0Rfma9Tw4J3gRWYU7k){:target="_blank"} и поместите содержимое архива `Firmware 4.1.0.zip` с обновлением в папку `4.1.0`, которую предварительно нужно создать в корне карты памяти вашей приставки
    * Должна быть папка `4.1.0` в корне карты памяти, а в ней куча файлов в формате `.nca` (или папок)
1. Вернитесь на стартовую страницу hekate и выберите **Launch** -> **SXOS**
    * SXOS напомнит вам о том, что он не активирован, нажимайте **Continue**, нам вполне достаточно его бесплатных функций
1. Перейдите в Альбомы ![]({{ base_path }}/images/screenshots/album.png), удерживая кнопку (R) на правом джойконе, для запуска HBL
1. Запустите **ChoiDujourNX**
1. Перейдите в папку `{% include /vars/caffeine_fw.txt %}`, в которой находятся файлы обновления прошивки, скопированные ранее, и нажмите "**Choose**"
	* Если вы не можете перейти в папку (папка отображается как файл), значит ваша папка имеет неверные атрибуты (чаще всего архивный). {% include /inc/fixatributes.txt %}, после чего продолжайте прошивку
1. Выберите "**{% include /vars/caffeine_fw.txt %} (exFAT)**"
1. Дождитесь окончания обработки прошивки и нажмите "**Select firmware**"
1. Дождитесь окончания распаковки прошивки
1. **ВНИМАНИЕ!** Обязательно проверьте, чтобы в поле "**Target firmware**" стояла версия устанавливаемой прошивки - "**{% include /vars/caffeine_fw.txt %} (exFAT)**", а так же, что перед строкой "**Prevent fuse burning (enable AutoRCM)**" стоит **крестик**! 

	![]({{ base_path }}/images/screenshots/choi_caff.png) 
	{: .text-center}
	{: .notice--warning}
1. Нажмите "**Start installation**"
1. После окончания установки нажмите "**Reboot**" -> "**Shutdown**", чтобы выключить приставку 

Теперь вы можете использовать карту памяти в формате exFAT
{: .notice--info}
{% endspoiler %}

{:start="5"}
1. [Отключение AutoRCM](autorcm#отключение-autorcm){:target="blank_"} - **НЕ ПРОПУСТИТЕ ВЫПОЛНЕНИЕ ЭТОГО ПУНКТА!** Хоть и всё используемое программное обеспечение и умеет определять патченная ли используется приставка или нет и отключать AutoRCM для патченных, все же необходимо проверить и убедится, что AutoRCM отключён, иначе вы гарантированно получите брик! 
1. [Блокировка обновлений в SysNAND](block-update){:target="blank_"} - установив блокировку на этом этапе, мы обезопасим себя даже от теоретической возможности случайно обновить нашу 4.1.0 на прошивку выше. К этому моменту у вас **должен быть** бекап вашей прошивки на случай, если что-то пойдёт не так! 
1. [Создание EmuNAND](emunand){:target="blank_"} - вы можете создать два emuMMC, один для пиратки, другой для лицензии и переключаться между ними, но только на Atmosphere! Таким образом у вас в системе будет три прошивки - {% include vars/caffeine_fw.txt %}, которую нельзя обновлять и которая используется как точка входа, EmuNAND на последней прошивке для пиратки с установленным incognito и привязанным аккаунтом и EmuNAND для лицензии безо всяких модификаций. 
    * [Восстановление доступа к серверам Nintendo на EmuNAND для лицензии](block-update#восстановление-доступа-к-серверам-nintendo){:target="blank_"} - так как Incognito_RCM умеет работать только с одним EmuNAND, то выполните восстановление доступа сразу после создания первого EmuNAND и используйте его для запуска лицензии. Второй EmuNAND будет для пиратки и не будет иметь доступа к серверам Nintendo. Если вы не собираетесь создавать EmuNAND специально для лицензии и онлайна, просто пропустите этот подпункт.
1. [Запуск кастомной прошивки](cfw){:target="blank_"} - теперь запускаем кастом. Он автоматически запустится из созданного ранее {% include abbr/emunand.txt abbr="EmuNAND" %} для того, чтобы обновить его на актуальную версию системного ПО, при этом оставив {% include abbr/sysnand.txt abbr="SysNAND" %} в его первозданном виде, без следов запуска кастомной прошивки
1. [Привязка аккаунта](link-account){:target="blank_"} - последний штрих. Привязки аккаунта для работы требуют некоторые игры
1. [Запуск игр](games){:target="blank_"} - финальная часть, ради которой всё и делалось
1. [Использование уже прошитой приставки](usage)

___

{% spoiler Материалы для самостоятельного изучения %}

{% include inc/additional.txt %}

{% endspoiler %}