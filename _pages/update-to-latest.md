---
permalink: /update-to-latest.html
title: Безопасное обновление прошивки 
author_profile: true
---
{% include toc title="Разделы" %}

# Теоретическая часть

Если вы хотите получить поддержку exFAT, полностью следуйте этому руководству. действия для активации exfat и для поднятия прошивки идентичный!
{: .notice--info}

Для удобства использования взлома в данный момент лучшим решением будет обновить прошивку до актуальной - {% include /vars/sys_version.txt %}. Однако, если ваша прошивка была ниже, чем 4.0.0, то обновившись вы рискуете остаться без колдбута, который, возможно, когда-нибудь нам подарят авторы атмосферы. Наиболее правильным решением в такой ситуации будет обновление с возможностью даунгрейда. 

Если же вам все это не нужно и вы не планируете ждать колдбута или более простоых методов взлома. либо у вас прошивка выше, чем 4.1.0, просто обновите прошивку через настройки! Помните, что при обновлении через настройки вам не нужно использовать nogc! 

В обычном режиме при установке прошивки, консоль проверяет количество сожжённых предохранителей. Если это количество больше, чем требуется для прошивки, то консоль понимает, что вы пытаетесь установить прошивку ниже, чем была установлена до этого и не позволит это сделать. Если же количество сожжённых предохранителей ниже, чем требует устанавливаемая прошивка, то прошивка разрешается и в ходе неё сжигается столько предохранителей сколько необходимо, чтобы соответствовать указанному в прошивке количеству. Таким образом вы не можете восстановить бекап своей старой прошивки, если её версия ниже, чем текущая.

Однако, все это можно обойти. 

Если вы обновляетесь с прошивки ниже, чем 4.0.0, то при восстановлении оригинальной прошивки у вас перестанет работать слот для картриджей. Сам слот останется в порядке, просто его прошивка обновится и перестанет быть совместимой с прошивками свитча ниже, чем 4.0.0. Избежать этого могут только пользователи CFW, потому что только у них есть возможность загружать готовые модули в систему. Ещё раз - **если вы используете CFW и обновляете вашу приставку с прошивок версии ниже, чем 4.0.0, то при возвращении на эту прошивку у вас не будет работать слот для картриджа**, если вы не примете меры. Это значит, что слот не будет работать ТОЛЬКО на прошивке ниже, чем 4.0.0. На любой прошивке выше он будет работать в обычном режиме! Хорошенько подумайте, готовы ли вы принести его в жертву! Очень маловероятно, что вам понадобится слот для картриджа, если вам по какой-то причине понадобится восстановиться до старой прошивки и если вы надумали использовать консоль на полную, то другого варианта в данный момент у вас нет. Пользователи SX OS не имеют возможности избежать прошивки слота, поскольку не имеют возможности загружать внешние модули. 
{: .notice--danger}

Обязательно сделайте резервную копию всех сохранений и важных данных, если таковые имеются, с помощью [Homebrew Launcher](launch-hbl){:target="_blank"} и соответствующей программы!
{: .notice--warning}

# Что понадобится

* Умение [запускать пейлоады через Fusée Gelée](fusee-gelee){:target="_blank"} и [любую кастомную прошивку](launch-cfw){:target="_blank"}
* Свежая версия [SDFiles от VK:3ds_cfw](https://github.com/rashevskyv/switch/releases/latest){:target="_blank"}
* Свежая версия [ChoiDujourNX](https://switchtools.sshnuke.net/){:target="_blank"}
* Свежая версия [briccmii](https://switchtools.sshnuke.net/){:target="_blank"}
* Прошивка {% include /vars/sys_version.txt %}:
	* [ЯД](https://yadi.sk/d/PNPLOnS3NtKuJw){:target="_blank"}
	* [MEGA](https://mega.nz/#!Ep8SHAjJ!VM8H3BEXfIlGpGa4LdgvT2fQ8AG_bGNaQmCr1K1uc0A){:target="_blank"}
	* [FEX](https://fex.net/674993139076?fileId=847196292){:target="_blank"}
* MicroSD в формате exFAT (такой формат необходим для бекапа, далее мы отформатируем карту обратно в FAT32)

# Инструкция

## Часть I - Резервное копирование NAND

Этот пункт нужно делать **обязательно**! 
{: .notice--warning}

1. Создайте [резервную копию NAND](backup-nand){:target="_blank"} консоли и поместите её в надёжное место 

## Часть II - Подготовка к обновлению

1. Выключите Switch и вставьте его карту памяти в ПК 
1. Отформатируйте карту, которую собираетесь использовать в FAT32 стандартными средствами вашей ОС, если она в другой файловой системе
	* Это удалит все данные с карты. Сделайте резервные копию всех важных данных, перед форматированием!
	* Пропустите этот пункт, если ваша карта в exfat и прекрасно при этом работает в самой системе
	* Форматируйте карту [таким](https://3ds.customfw.xyz/clean_sd#ii-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-sd-%D0%BA%D0%B0%D1%80%D1%82%D1%8B){:target="_blank"} способом, если не удаётся сделать этого прямо через Windows
	* В особенно безнадёжных случаях можете попробовать [обновиться с серверов Nintendo](№обновление-с-серверов-nintendo)
1. Скопируйте содержимое `.zip`-архива [SDFiles от VK:3ds_cfw](https://github.com/rashevskyv/switch/releases/latest){:target="_blank"} в корень карты памяти
1. Скопируйте содержимое `ChoiDujourNX.nro` из `.zip`-архива [ChoiDujourNX](https://switchtools.sshnuke.net/){:target="_blank"} в папку `switch` на карте памяти
1. Скопируйте содержимое `.zip`-архива с прошивкой {% include /vars/sys_version.txt %} в корень карты памяти

## Часть III - Проверка количества сожжённых предохранителей

1. Включите [AutoRCM](autorcm){:target="_blank"}
1. Запомните или запишите число напротив строки "Burnt fuses" - оно и будет означать количество сожжённых предохранителей. 
	* 1 сгоревший соответствуют прошивке 1.0.0
	* 2 сгоревших соответствуют прошивке 2.0.0-2.3.0
	* 3 сгоревших соответствуют прошивке 3.0.0
	* 4 сгоревших соответствуют прошивке 3.0.1-3.0.2
	* 5 сгоревших соответствуют прошивке 4.0.0-4.1.0
	* 6 сгоревших соответствуют прошивке 5.х.х
	* 7 сгоревших соответствуют прошивке 6.0.0
1. Нажмите любую кнопку для выхода в меню
1. Выберите "Back", чтобы вернуться в главное меню

## Часть IV - Обновление прошивки

1. Запустите [RajNX](rajnx){:target="_blank"}
	* Если прошивка не запускается, или в HBL не отображаются имеющиеся приложения, запустите "**RajNX Debug**", вместо обычного RajNX
	* Если по каким-то причинам у вас не запускается кастомная прошивка, воспользуйтесь [обновлением вручную](update-to-latest_old)! Однако, рекомендую все-таки разобраться с причиной её неработоспособности!
1. Откройте [Homebrew Launcher](launch-hbl){:target="_blank"}
1. Запустите ChoiDujourNX
	* Если по каким-то причинам у вас не запускается ChoiDujourNX, попробуйте запустить его из под другого кастома, если и это не помогает, воспользуйтесь [обновлением вручную](update-to-latest_old)! Однако, рекомендую все-таки разобраться с причиной его неработоспособности!
1. Перейдите в папку, в которой находится прошивка {% include /vars/sys_version.txt %}, скопированная ранее и нажмите "**Choose**"
1. Выберите "**{% include /vars/sys_version.txt %} (exFAT)**"
1. Дождитесь окончания обработки прошивки и нажмите "**Select firmware**"
1. Дождитесь окончания распаковки прошивки и нажмите "**Start installation**"
1. После окончания установки нажмите "**Reboot**", "**Reboot now!**"

## Часть V - AutoRCM

AutoRCM - на консоли специальным образом портится BOOT0, вследствие чего консоль не может загрузиться прямо в систему и загружается автоматически в режим RCM. Достаточно просто включить консоли и она автоматически попадёт в режим восстановления. Не нужно зажимать комбинацию кнопок и использовать замыкатель, но пейлоад для запуска прошивки всё равно передавать нужно!
{: .notice--info}

Теперь приставка всегда при включении будет находится в режиме RCM. Не отключайте AutoRCM, если не хотите сжечь предохранитель. Единственная загрузка консоли вне этого режима гарантированно сожжёт предохранитель!

1. Проверьте не сгорели ли после обновления предохранители, выполнив ещё раз [Часть III](#%D0%A7%D0%B0%D1%81%D1%82%D1%8C-iii---%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0-%D0%BA%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B0-%D1%81%D0%BE%D0%B6%D0%B6%D1%91%D0%BD%D0%BD%D1%8B%D1%85-%D0%BF%D1%80%D0%B5%D0%B4%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D0%B5%D0%B9){:target="_blank"}

## Часть VI - Первый запуск 

Теперь при каждом запуске **RajNX with nogc-patch** или при запуске **ReiNX** с файлом `nogc` в папке `ReiNX`, у вас будет запускаться кастомная прошивка, чистится логи, отключается проверка подписи и патчится системный модуль, позволяющий не обновлять прошивку слота для картриджей. Если вы захотите запустить другую конфигурацию hekate, не забудьте добавить строку `kip1=kip1patch=nogc,nosigchk` в конфиг. Помните, что запуск другой прошивки без этого модуля приведут к обновлению прошивки слота и при даунгрейде на прошивку ниже, чем 4.0.0 он перестанет работать! Это значит, что слот не будет работать ТОЛЬКО на прошивке ниже, чем 4.0.0. На любой прошивке выше он будет работать в обычном режиме! 
{: .notice--warning}

Если при первом запуске RajNX приставка не запускается (черный экран больше 5-ти минут, зависания, ошибки), попробуйте запускать из под ReiNX, или наоборот - не запускается ReiNX, попробуйте RajNX. 
{: .notice--warning}

Обратите внимание, что при выборе **RajNX with nogc-patch** или при запуске **ReiNX** с файлом `nogc` в папке `ReiNX` у вас перестанет работать слот картриджа на прошивке {% include /vars/sys_version.txt %}. Это не ошибка, это сделано намеренно, чтобы не дать прошивке слота вашего картриджа обновиться! 

Теперь приставка должна находится на последней версии прошивки, поддерживать exFAT и сохранить предохранители. Теперь можете отформатировать карту памяти в exFAT.
{: .notice--warning}

Вы можете удалить папку с прошивкой {% include /vars/sys_version.txt %} с карты памяти. 
{: .notice--warning}

# Предупреждения

* Если вы будете заменять файл `hekate_ipl.ini` на другой, не забудьте прописать строчку `kip1patch=nogc,nosigchk` в конфиг запускаемого кастома
* При обновлении прошивки средствами системы, AutoRCM слетает 
* При установке драйвера exFAT средствами системы, AutoRCM слетает 
* Даже один единственный запуск приставки в официальную прошивку не через hekate сожжёт предохранители, которые мы так отчаянно пытались сохранить 

# Зачем нужна NOGC 

Если вы обновились с прошивки индекс которой строго ниже, чем 4.0.0 на прошивку выше, чем 4.0.0, включительно, то после обновления, при первом же запуске прошивки, вы так же обновите прошивку и слота для картриджей. Это приведёт к тому, что захоти вы вернуться на первоначальную прошивку, вы лишитесь возможности использовать слот для картриджей. Нужен ли он вам будет - это вопрос. Поэтому, если вы обновлялись с прошивки строго ниже, чем 4.0.0 и у вас нет картриджей, которые бы вы могли использовать, не отключайте NOGC. В остальных случаях - на ваше усмотрение. Еще раз - NOGC нужен только тем пользователям, что выполнял безопасное обновление с прошивки строго ниже, чем 4.0.0!

# Обновление с серверов Nintendo 

Вариант для внимательных и самоуверенных. Вы можете обновить прошивку и обычным официальным способом, если вам не нужно сберечь предохранители и вы не сильно переживаете из-за возможности получить бан. 

1. Включите приставку и подключитесь к активной интернет-сети
1. Перейдите в "**Настройки -> Система -> Обновление прошивки**" и начните обновление прошивки
1. Вместо правого джойкона вставьте [замыкатель](fusee-gelee#замыкатель){:target="_blank"}
1. Когда обновление закончится, удерживайте кнопку (VOL+). 

	К моменту перезагрузки консоли вы должны удерживать кнопку и замыкатель должен быть вставлен!
	{: .notice--warning}
	
1. Консоль должна загрузиться в режим RCM
	* Если консоль загрузилась в прошивку - ваши предохранители сгорели. Просто продолжайте выполнять инструкцию дальше
1. Активируйте режим [AutoRCM](autorcm){:target="_blank"} и запустите прошивку

___

# Следующий шаг: [Запуск кастомной прошивки](launch-cfw) 
{: .notice--success}