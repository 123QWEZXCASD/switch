---
permalink: /update-to-latest.html
title: Безопасное обновление прошивки 
author_profile: true
---
{% include toc title="Разделы" %}

# Важная информация

Это же руководство подходит и для понижения прошивки. Помните, что в случае понижения прошивки есть шанс, что пониженная прошивка не запустится. В таком случае вам будет необходимо [восстанавливить прошивку вручную](downgrade_fw){:target="_blank"}. 

# Теоретическая часть

Если вы хотите получить поддержку exFAT или SDXC, полностью следуйте этому руководству, даже если у вас и так уже последняя прошивка. Действия для активации exFAT, SDXC и для поднятия прошивки идентичный! Да,нужно делать, даже если у вас уже и так {% include /vars/sys_version.txt %}
{: .notice--warning}

При обновлении системного ПО с версии 4.0.0 включительно, у вас перестанет работать картриджный слот. Без паники! Это сделано намеренно! В прошивке 4.0.0 используется новый драйвер для картриджного слота. Если вы обновите приставку с прошивки ниже, чем 4.0.0, то драйвер для слота обновится автоматически. Таким образом слот для картриджей будет работать только на прошивке выше, чем 4.0.0. Если вам когда-либо понадобится вернуться на старую прошивку, то там слот уже работать не будет. Для того, чтобы избежать этого всем, кто обновлялся с 1.0.0-4.0.0 включительно, нужно будет загружаться в прошивку с параметром **NOGC**. Следствием работы NOGC является отключенный картриджный слот. Слот будет отключен автоматически в том случае, если вы обновлялись безопасно с прошивки ниже, чем 4.0.0 по этой инструкции

Если ваша прошивка была ниже, чем 4.0.0, наиболее правильным решением будет обновление с возможностью даунгрейда. На прошивках до 4.0.0 включительно осталась потенциальная возможность установки колдбута. То есть после того, как он выйдет, мы сможем запускать <abbr title="Модифицированное программное обеспечение консоли, написанное энтузиастами, позволяет делать вещи, недоступные пользователям официальных прошивок, например, запускать неподписанные приложения. В контексте прошивки свитча мы будем называть имеющееся программное обеспечение кастомной прошивкой, хотя, чисто технически, это не так">кастомную прошивку</abbr> вообще безо всяких манипуляций со входом в RCM и прочее. Теоретически.

При прошивке на некоторые версии (1.0.0, 2.0.0, 5.0.0, 6.0.0, 6.2.0, 7.0.0) приставка сжигает специальные предохранители на чипе, чтобы по их состоянию отслеживать версию вашей прошивки и избегать даунгрейд. В обычном режиме при установке прошивки, консоль проверяет количество сожжённых предохранителей. Если это количество больше, чем требуется для прошивки, то консоль понимает, что вы пытаетесь установить прошивку ниже, чем была установлена до этого и не позволит это сделать. Если же количество сожжённых предохранителей ниже, чем требует устанавливаемая прошивка, то прошивка разрешается и в ходе неё сжигается столько предохранителей сколько необходимо, чтобы соответствовать указанному в прошивке количеству. 

**В данный момент количество сожжённых предохранителей не важно для кастомных прошивок. Вы сможете откатиться на любую прошивку при условии использования загрузчика hekate.** Официальная же прошивка просто не запуститься, если версия установленной прошивки ниже, чем на то указывают предохранители. Если выше, то OFW сожжет предохранители, чтобы они соответствовали запущенной версии прошивки 

По этой инструкции можно менять версию своего ПО на любую, а не только на {% include /vars/sys_version.txt %}. Другие версии ПО Switch можно найти [здесь](https://darthsternie.net/index.php/switch-firmwares/){:target="_blank"} 

# Что понадобится

* Умение [запускать пейлоады через Fusée Gelée](fusee-gelee){:target="_blank"} и [<abbr title="Модифицированное программное обеспечение консоли, написанное энтузиастами, позволяет делать вещи, недоступные пользователям официальных прошивок, например, запускать неподписанные приложения. В контексте прошивки свитча мы будем называть имеющееся программное обеспечение кастомной прошивкой, хотя, чисто технически, это не так">кастомную прошивку</abbr>](launch-cfw){:target="_blank"}
* Свежая версия <abbr title="Сборник, состоящий из выбранного кастома, необходимых программ и скриптов, которые все это установят правильным образом. Состав кефира и инструкцию по установке можно посмотреть в его репозитории">[kefir](https://github.com/rashevskyv/switch/releases/latest){:target="_blank"}</abbr>
* Свежая версия [ChoiDujourNX](https://switchtools.sshnuke.net/){:target="_blank"}
* Прошивка {% include /vars/sys_version.txt %} (скачайте по любой из ссылок):
	* [magnet](magnet:?xt=urn:btih:C9A180DC1BAC1093BE3B2EC4DDDC599E8F7AD98D){:target="_blank"}
	* [ЯД](https://yadi.sk/d/iKnZNBr1WgOZBw){:target="_blank"}
	* [GD](https://drive.google.com/file/d/1xoB896cBnBECd9Th0AXlgh8Anlq2V0Xy/view?usp=sharing){:target="_blank"}
	* [MEGA](https://mega.nz/#!glFyCCYR!uVSsoGMLBXfShJ8onvQbxSb5g6j9vKeZf2Umg3qO8gw){:target="_blank"}
	* [FEX](https://fex.net/s/n71n3ka){:target="_blank"}
* Карта памяти 

# Инструкция

## Часть I - Резервное копирование NAND

Пропустите эту часть, если у вас уже есть резервная копия!

Если резервной копии нет, эту часть нужно делать **обязательно**!
{: .notice--danger}

1. Создайте [резервную копию NAND](backup-nand){:target="_blank"} консоли и поместите её в надёжное место 

## Часть II - Подготовка к обновлению

1. Выключите Switch и вставьте его карту памяти в ПК 
	* **Внимание!** Если вы используете на приставке новую карту памяти, с которой никогда не запускали приставку, а предыдущая ваша карта памяти была в fat32, вероятнее всего на вашей приставке не установлены драйвера exFAT. В таком случае **[отформатируйте карту](http://customfw.xyz/format_sd){:target="_blank"}, которую собираетесь использовать в FAT32**
		* Не нужно делать, если у вас в данный момент на текущей прошивке приставка уже работает с картой памяти exFAT 
		* Это удалит все данные с карты. Сделайте резервные копию всех важных данных, перед форматированием, потом верните их обратно на карту!
		* Можете просто использовать любую другую карту в fat32, 4ГБ хватит с головой для обновления 
		* Форматируйте карту [таким](http://customfw.xyz/format_sd){:target="_blank"} способом, если не удаётся сделать этого через Windows
		* Если у вас нет драйвера exFAT, то вы не сможете запустить приставку с помощью exFAT-карты памяти 
	* **Внимание!** Если вы используете тему на приставке, удалите её, иначе после обновления прошивки приставка будет загружаться с ошибкой! Удалить тему можно одним из нижеописанных способов:
		* Удалив папку `%cfw_name%/titles/0100000000001000`
		* Выбрав удаление темы в опциях <abbr title="Сборник, состоящий из выбранного кастома, необходимых программ и скриптов, которые все это установят правильным образом. Состав кефира и инструкцию по установке можно посмотреть в его репозитории">[kefir](https://github.com/rashevskyv/switch/releases/latest){:target="_blank"}</abbr>
		* Через приложение **NxThemesInstaller**, выбрав опцию **Uninstall Theme** 
1. Установите `.7z`-архив <abbr title="Сборник, состоящий из выбранного кастома, необходимых программ и скриптов, которые все это установят правильным образом. Состав кефира и инструкцию по установке можно посмотреть в его репозитории">[kefir](https://github.com/rashevskyv/switch/releases/latest){:target="_blank"}</abbr>, согласно инструкции в репозитории, если ещё не делали этого
	<!--* Если версия вашего системного ПО ниже, чем 3.0.0 включительно, то вместо установки кефира вы делаете: 
		1. Скопируйте в корень карты памяти приставки **содержимое** архива [`_old.7z`](https://github.com/rashevskyv/switch/releases/download/kefir27/old.7z){:target="_blank"}
		1. После того, как вы удачно обновите системное ПО, обязательно **ещё раз установите <abbr title="Сборник, состоящий из выбранного кастома, необходимых программ и скриптов, которые все это установят правильным образом. Состав кефира и инструкцию по установке можно посмотреть в его репозитории">[kefir](https://github.com/rashevskyv/switch/releases/latest){:target="_blank"}</abbr>**-->

1. Скопируйте **содержимое** архива `{% include /vars/sys_version.txt %}.zip` с прошивкой в корень карты памяти
	* Не с кефиром, с прошивкой. Ссылки на прошивку в разделе [Что понадобится](#что-понадобится)

## Часть III - Обновление прошивки

1. Запустите [<abbr title="Модифицированное программное обеспечение консоли, написанное энтузиастами, позволяет делать вещи, недоступные пользователям официальных прошивок, например, запускать неподписанные приложения. В контексте прошивки свитча мы будем называть имеющееся программное обеспечение кастомной прошивкой, хотя, чисто технически, это не так">кастомную прошивку</abbr>](launch-cfw){:target="_blank"}
	* Проигнорируйте ссылку на обновление при запуске <abbr title="Модифицированное программное обеспечение консоли, написанное энтузиастами, позволяет делать вещи, недоступные пользователям официальных прошивок, например, запускать неподписанные приложения. В контексте прошивки свитча мы будем называть имеющееся программное обеспечение кастомной прошивкой, хотя, чисто технически, это не так">кастома</abbr> для обновления. Неужели это и правда нужно объяснять? 
	* Если после логотипа Nintendo вы наблюдаете черный экран, значит вы проигнорировали форматирование карты памяти в FAT32, которое нужно было сделать выше
1. Откройте [Homebrew Launcher](launch-hbl){:target="_blank"}
1. Запустите **ChoiDujourNX**
1. Перейдите в папку, в которой находится прошивка {% include /vars/sys_version.txt %}, скопированная ранее и нажмите "**Choose**"
	* Если вы не можете перейти в папку (папка отображается как файл), значит ваша папка имеет неверные атрибуты (чаще всего архивный). Запустите hekate, перейдите в меню **Tools** выберите **Fix archive bit (except Nintendo folder)**, после чего продолжайте прошивку
1. Выберите "**{% include /vars/sys_version.txt %} (exFAT)**"
1. Дождитесь окончания обработки прошивки и нажмите "**Select firmware**"
1. Дождитесь окончания распаковки прошивки и нажмите "**Start installation**"
	* Если не получается установить прошивку (например, при попытке установить драйвера exFAT на прошивку с таким же номером версии), установите прошивку версией ниже (7.0.1, например), а затем установите нужную
1. После окончания установки нажмите "**Reboot**", "**Reboot now!**", чтобы выключить приставку 

Вы можете удалить папку с прошивкой {% include /vars/sys_version.txt %} с карты памяти. 
{: .notice--info}

Вы можете отформатировать карту памяти обратно в exFAT через ПК
{: .notice--info}


## Часть IV - AutoRCM

AutoRCM - на консоли специальным образом изменяется загрузочный сектор, вследствие чего консоль не может загрузиться прямо в систему и загружается автоматически в режим RCM. Достаточно просто включить консоли и она автоматически попадёт в режим восстановления. Не нужно зажимать комбинацию кнопок и использовать замыкатель, но пейлоад для запуска прошивки всё равно передавать нужно!
{: .notice--info}

После обновления через ChoiDujourNX AutoRCM будет включен автоматически. Теперь приставка всегда при включении будет находится в режиме RCM. Не отключайте AutoRCM, если не хотите сжечь предохранитель. Единственная загрузка консоли вне этого режима гарантированно сожжёт предохранитель!

## Часть VI - Блокировка обновлений

[Заблокируйте доступ к серверам Nintendo](block-update){:target="_blank"}, чтобы избежать проблем с обновлениями и минимизировать шанс бана.

## Часть VII - Связывание учётной записи консоли с аккаунтом Nintendo

[Заблокируйте доступ к серверам Nintendo](block-update){:target="_blank"}, чтобы избежать проблем с обновлениями и минимизировать шанс бана.

# Важно знать

* Даже один единственный запуск приставки в официальную прошивку не через hekate сожжёт предохранители, которые мы так отчаянно пытались сохранить 
* Если после прошивки вам предложат обновить контроллеры - обновляйте
* Если после обновления у вас чёрный экран после логотипа Nintendo, обновите <abbr title="Сборник, состоящий из выбранного кастома, необходимых программ и скриптов, которые все это установят правильным образом. Состав кефира и инструкцию по установке можно посмотреть в его репозитории">[kefir](https://github.com/rashevskyv/switch/releases/latest){:target="_blank"}</abbr>
	* Если не помогло, прочтите внимательно [FAQ](faq){:target="_blank"}
* Если приставка не загружается после прошивки (падает с ошибкой, например), [восстановите бекап](backup-nand#%D0%B2%D0%BE%D1%81%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%80%D0%B5%D0%B7%D0%B5%D1%80%D0%B2%D0%BD%D0%BE%D0%B9-%D0%BA%D0%BE%D0%BF%D0%B8%D0%B8){:target="_blank"} или [восстанавливайте прошивку вручную](downgrade_fw){:target="_blank"}

___

# Следующий шаг: [Запуск <abbr title="Модифицированное программное обеспечение консоли, написанное энтузиастами, позволяет делать вещи, недоступные пользователям официальных прошивок, например, запускать неподписанные приложения. В контексте прошивки свитча мы будем называть имеющееся программное обеспечение кастомной прошивкой, хотя, чисто технически, это не так">кастомной прошивки</abbr>](launch-cfw) 
{: .notice--success}